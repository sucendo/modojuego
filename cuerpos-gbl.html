<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Three.js WebGL - Earth with GLTFLoader</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
		<style>
			body {
				margin: 0;
				overflow: hidden;
				background-color: #000; /* Fondo negro para simular el espacio */
			}
			canvas {
				display: block;
			}
		</style>
	</head>

	<body>
		<div id="info">
			<a href="https://threejs.org" target="_blank" rel="noopener">Three.js</a> - Earth Model with GLTFLoader
		</div>

		<script type="importmap">
			{
				"imports": {
					"three": "https://cdn.jsdelivr.net/gh/mrdoob/three.js@r158/build/three.module.js",
					"three/addons/": "https://cdn.jsdelivr.net/gh/mrdoob/three.js@r158/examples/jsm/"
				}
			}
		</script>

		<script type="module">
			import * as THREE from 'three';
			import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
			import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

			let camera, scene, renderer, controls, earthModel;

			init();
			animate();

			function init() {

				// Configuración de la cámara
				camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 100);
				camera.position.set(0, 2, 6);

				// Crear la escena
				scene = new THREE.Scene();

				// Fondo negro para simular el espacio
				scene.background = new THREE.Color(0x000000);

				// Añadir una luz ambiental
				const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); // Luz general suave
				scene.add(ambientLight);

				// Añadir un punto de luz (sol)
				const pointLight = new THREE.PointLight(0xffffff, 1, 50);
				pointLight.position.set(10, 10, 10);
				scene.add(pointLight);

				// Cargar el modelo GLB de la Tierra
				const loader = new GLTFLoader();
				loader.setPath('./models/celestial_bodies/'); // Ruta a tu modelo
				loader.load('Earth_1_12756.glb', (gltf) => {
					earthModel = gltf.scene;

					// Ajustar escala y posición
					earthModel.scale.set(1, 1, 1);
					earthModel.rotation.y = Math.PI; // Rotación inicial
					scene.add(earthModel);
				});

				// Crear el renderizador
				renderer = new THREE.WebGLRenderer({ antialias: true });
				renderer.setPixelRatio(window.devicePixelRatio);
				renderer.setSize(window.innerWidth, window.innerHeight);
				document.body.appendChild(renderer.domElement);

				// Configuración de los controles orbitales
				controls = new OrbitControls(camera, renderer.domElement);
				controls.target.set(0, 0, 0);
				controls.update();

				// Ajustar el tamaño en el redimensionamiento de la ventana
				window.addEventListener('resize', onWindowResize);
			}

			function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize(window.innerWidth, window.innerHeight);
			}

			function animate() {
				requestAnimationFrame(animate);

				// Rotar la Tierra (si está cargada)
				if (earthModel) {
					earthModel.rotation.y += 0.01; // Rotación suave
				}

				// Renderizar la escena
				renderer.render(scene, camera);
			}
		</script>
	</body>
</html>
