<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Three.js WebGL - Forest House</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
		<style>
			body {
				margin: 0;
				overflow: hidden;
				background-color: #d7e5ef; /* Fondo más claro */
			}
			canvas {
				display: block;
			}
		</style>
	</head>

	<body>
		<div id="info">
			<a href="https://threejs.org" target="_blank" rel="noopener">Three.js</a> - Forest House GLB Model
		</div>

		<script type="importmap">
			{
				"imports": {
					"three": "https://cdn.jsdelivr.net/gh/mrdoob/three.js@r158/build/three.module.js",
					"three/addons/": "https://cdn.jsdelivr.net/gh/mrdoob/three.js@r158/examples/jsm/"
				}
			}
		</script>

		<script type="module">
			import * as THREE from 'three';
			import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
			import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

			let camera, scene, renderer, controls, forestHouseModel;

			init();
			animate();

			function init() {

				// Configuración de la cámara
				camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 100);
				camera.position.set(5, 5, 10);

				// Crear la escena
				scene = new THREE.Scene();

				// Fondo más claro para el modelo
				scene.background = new THREE.Color(0xd7e5ef);

				// Añadir luz ambiental
				const ambientLight = new THREE.AmbientLight(0xffffff, 0.7); // Luz general suave
				scene.add(ambientLight);

				// Añadir luz direccional
				const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
				directionalLight.position.set(5, 10, 7.5);
				scene.add(directionalLight);

				// Cargar el modelo GLB del Forest House
				const loader = new GLTFLoader();
				loader.setPath('./models/celestial_bodies/'); // Ruta al modelo
				loader.load('forest_house.glb', (gltf) => {
					forestHouseModel = gltf.scene;

					// Ajustar escala y posición
					forestHouseModel.scale.set(1, 1, 1);
					forestHouseModel.position.set(0, 0, 0);
					scene.add(forestHouseModel);
				});

				// Crear el renderizador
				renderer = new THREE.WebGLRenderer({ antialias: true });
				renderer.setPixelRatio(window.devicePixelRatio);
				renderer.setSize(window.innerWidth, window.innerHeight);
				document.body.appendChild(renderer.domElement);

				// Configuración de los controles orbitales
				controls = new OrbitControls(camera, renderer.domElement);
				controls.target.set(0, 0, 0);
				controls.update();

				// Ajustar el tamaño en el redimensionamiento de la ventana
				window.addEventListener('resize', onWindowResize);
			}

			function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize(window.innerWidth, window.innerHeight);
			}

			function animate() {
				requestAnimationFrame(animate);

				// Animación adicional opcional (si fuera necesario)
				if (forestHouseModel) {
					forestHouseModel.rotation.y += 0.01; // Rotación lenta
				}

				// Renderizar la escena
				renderer.render(scene, camera);
			}
		</script>
	</body>
</html>
