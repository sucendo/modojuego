<!doctype html>
<html lang="es">
	<head>
		<meta charset="utf-8" />
		<title>Castles & Lords</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		
		<!-- Favicon principal en PNG -->
		<link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon_256x256.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon_128x128.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon_64x64.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon_48x48.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon_32x32.png" />
		<link rel="icon" type="image/png" sizes="16x16" href="img/icons/favicon_16x16.png" />
		
		<!-- Opcional: versi√≥n WebP para navegadores modernos -->
		<link rel="icon" type="image/webp" href="img/icons/favicon.webp" />
		
		<!-- Opcional: fallback cl√°sico .ico en la ra√≠z del sitio -->
		<link rel="shortcut icon" href="favicon.ico" />
		
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<div id="ui-root">
			<header id="top-bar">
			<div class="group">
				<span>D√≠a: <span id="day-display">1</span></span>
				<span>
					Velocidad:
					<button class="speed-btn" data-speed="0">‚è∏</button>
					<button class="speed-btn active" data-speed="1">x1</button>
					<button class="speed-btn" data-speed="3">x3</button>
				</span>
	
				<!-- Logo centrado del juego -->
				<div id="top-branding">
				<img
					id="game-logo"
					src="img/title/Castles_&_Lords_line-removebg.webp"
					alt="Castles &amp; Lords"
				/>
				</div>
	
				<!-- Men√∫ de gesti√≥n de partida (escudo redondo) -->
				<div id="player-menu" class="player-menu">
				<button
					id="player-menu-button"
					class="player-menu-button"
					data-tooltip="Gesti√≥n de partida: guardar, cargar, importar/exportar y nombre del jugador."
				>
					<img
					src="img/title/coat_of_arms.webp"
					alt="Escudo del se√±or"
					/>
				</button>
				<div id="player-menu-dropdown" class="player-menu-dropdown">
					<div class="player-menu-row player-name-row">
					<span class="player-menu-label">Jugador</span>
					<input
						id="player-name-input"
						class="player-name-input"
						type="text"
						maxlength="32"
						placeholder="Nombre del jugador"
					/>
					</div>
					<button id="save-btn" class="player-menu-item">üíæ Guardar</button>
					<button id="load-btn" class="player-menu-item">üìÇ Cargar</button>
					<button id="export-btn" class="player-menu-item">‚¨áÔ∏è Exportar</button>
					<label class="player-menu-item file-import-label">
					‚¨ÜÔ∏è Importar
					<input
						id="import-input"
						type="file"
						accept=".json,application/json"
						hidden
					/>
					</label>
				</div>
				</div>
			</div>
			<div class="group">
				<span>üëë T√≠tulo: <span id="title-display">Se√±or de la fortaleza</span></span>
				<span>‚≠ê Prestigio: <span id="prestige-display">0</span></span>
				<span>üõ°Ô∏è Defensa: <span id="defense-display">0</span></span>
			</div>
			<div class="group resources">
				<span>üí∞ Oro: <span id="gold-display">0</span></span>
				<span>üß± Piedra: <span id="stone-display">0</span></span>
				<span>üå≥ Madera: <span id="wood-display">0</span></span>
				<span>üçû Comida: <span id="food-display">0</span></span>
				<span>üë• Poblaci√≥n: <span id="pop-display">0</span></span>
				
			</div>
			</header>
	
			<main id="main-layout">
				<aside id="left-panel">
					<!-- BLOQUE 1: Consejo y leyes -->
					<div class="panel-group" data-group="council">
						<div class="panel-header">Consejo y leyes</div>
						<div class="panel-body">
							<h2>Impuestos</h2>
							<div class="tax-controls">
								<button class="tax-btn" data-tax="0">Bajos</button>
								<button class="tax-btn active" data-tax="1">Normales</button>
								<button class="tax-btn" data-tax="2">Altos</button>
							</div>
					
							<h2>Leyes</h2>
							<div class="law-row">
								<span>Trabajo obligatorio en las obras</span>
								<div class="law-buttons">
								<button class="law-btn active" data-law="corveeLabor" data-value="0">No</button>
								<button class="law-btn" data-law="corveeLabor" data-value="1">S√≠</button>
								</div>
							</div>
							<div class="law-row">
								<span>Protecci√≥n de bosques comunales</span>
								<div class="law-buttons">
								<button class="law-btn active" data-law="forestProtection" data-value="0">No</button>
								<button class="law-btn" data-law="forestProtection" data-value="1">S√≠</button>
								</div>
							</div>
							<div class="law-row">
								<span>Tasa obligatoria del molino</span>
								<div class="law-buttons">
								<button class="law-btn active" data-law="millTax" data-value="0">No</button>
								<button class="law-btn" data-law="millTax" data-value="1">S√≠</button>
								</div>
							</div>
							<div class="law-row">
							<span>Censo y registros oficiales</span>
								<div class="law-buttons">
									<button class="law-btn active" data-law="censusLaw" data-value="0">No</button>
									<button class="law-btn" data-law="censusLaw" data-value="1">S√≠</button>
								</div>
							</div>
							<div class="law-row">
							<span>Control de precios del grano</span>
								<div class="law-buttons">
									<button class="law-btn active" data-law="grainPriceControl" data-value="0">No</button>
									<button class="law-btn" data-law="grainPriceControl" data-value="1">S√≠</button>
								</div>
							</div>			  
							<p class="note">
								Las leyes afectan a c√≥mo se reparte la gente, a la producci√≥n y a las relaciones.
							</p>
						</div>
					</div>
	
					<!-- BLOQUE 2: Construcci√≥n -->
					<div class="panel-group" data-group="build">
						<div class="panel-header">Construcci√≥n</div>
						<div class="panel-body">
							<h2>Edificios</h2>
							<div class="build-buttons">
								<!-- Fila 1: Torres (cuadrada y redonda) -->
								<div class="build-row">
									<button class="build-btn active" data-building="tower_square">
										<img class="build-icon" src="img/buildings/tower_square.webp" alt="Torre cuadrada" />
									</button>
									<button class="build-btn" data-building="tower_round">
										<img class="build-icon" src="img/buildings/tower_round.webp" alt="Torre redonda" />
									</button>
									<button class="build-btn" data-building="tower_square_tall">
										<img class="build-icon" src="img/buildings/tower_square_tall.webp" alt="Torre cuadrada alta" />
									</button>
									<button class="build-btn" data-building="tower_round_tall">
										<img class="build-icon" src="img/buildings/tower_round_tall.webp" alt="Torre redonda alta" />
									</button>
								</div>
								
								<!-- Fila 2: Murallas (muralla 1 y muralla 2) -->
								<div class="build-row">
									<button class="build-btn" data-building="wall_1">
										<img class="build-icon" src="img/buildings/wall_1.webp" alt="Muralla 1" />
									</button>
									<button class="build-btn" data-building="wall_2">
										<img class="build-icon" src="img/buildings/wall_2.webp" alt="Muralla 2" />
									</button>
								</div>
	
								<!-- Fila 3: Puertas (puerta 1 y puerta 2) -->
								<div class="build-row">
									<button class="build-btn" data-building="gate_1">
										<img class="build-icon" src="img/buildings/gate_1.webp" alt="Puerta 1" />
									</button>
									<button class="build-btn" data-building="gate_2">
										<img class="build-icon" src="img/buildings/gate_2.webp" alt="Puerta 2" />
									</button>
								</div>
	
								<!-- Fila 4: Infraestructura econ√≥mica -->
								<div class="build-row">
									<button class="build-btn" data-building="farm">
										<img class="build-icon" src="img/buildings/farm.webp" alt="Granja" />
									</button>
									<button class="build-btn" data-building="quarry">
										<img class="build-icon" src="img/buildings/quarry.webp" alt="Cantera" />
									</button>
									<button class="build-btn" data-building="lumberyard">
										<img class="build-icon" src="img/buildings/lumberyard.webp" alt="Aserradero" />
									</button>
								</div>
								
								<!-- Fila 5: Recursos -->
								<div class="build-row">
									<button class="build-btn" data-building="mill">
										<img class="build-icon" src="img/buildings/mill.webp" alt="Molino" />
									</button>
								</div>
	
								<!-- Fila 6: caminos e infraestructuras -->
								<div class="build-row">
									<button class="build-btn" data-building="bridge">
										<img class="build-icon" src="img/buildings/bridge.webp" alt="Puente" />
									</button>
									
									<button class="build-btn" data-building="road">
										<img class="build-icon" src="img/buildings/road.webp" alt="Camino" />
									</button>
									
									<button class="build-btn" data-building="tile">
										<img class="build-icon" src="img/buildings/tile.webp" alt="Loseta" />
									</button>
								</div>
								
								<!-- Fila 7: Borrado -->
								<div class="build-row">
									<button class="build-btn" data-building="demolish">
										üóë
									</button>
								</div>
							</div>
							<p class="note">Recuerda: granjas solo en llano, canteras en roca y aserraderos en bosque.</p>
						</div>
					</div>
	
					<!-- BLOQUE 3: Relaciones -->
					<div class="panel-group" data-group="relations">
						<div class="panel-header">Relaciones</div>
						<div class="panel-body">
							<ul class="relations-list">
								<li>Iglesia: <span id="rel-church">50</span></li>
								<li>Corona: <span id="rel-crown">50</span></li>
								<li>Pueblo: <span id="rel-people">50</span></li>
								<li>Gremios: <span id="rel-guilds">50</span></li>
							</ul>
						</div>
					</div>
			
					<!-- BLOQUE 4: Poblaci√≥n y gremios -->
					<div class="panel-group" data-group="population">
						<div class="panel-header">Poblaci√≥n y gremios</div>
						<div class="panel-body">
							<h2>Poblaci√≥n</h2>
							<!-- En el lateral usamos otro id para no duplicar el de la barra superior -->
							<p>Total: <span id="pop-display-side">0</span></p>
							<ul class="labor-list">
							<li>Alba√±iles: <span id="labor-builders">0</span></li>
							<li>Granjeros: <span id="labor-farmers">0</span></li>
							<li>Canteros: <span id="labor-miners">0</span></li>
							<li>Le√±adores: <span id="labor-lumberjacks">0</span></li>
							<li>Soldados: <span id="labor-soldiers">0</span></li>
							<li>Administraci√≥n / Servicio: <span id="labor-servants">0</span></li>
							<li>Clero: <span id="labor-clergy">0</span></li>
							<li>Reservas (ni√±os/ancianos): <span id="labor-unassigned">0</span></li>
							</ul>
							<p class="note">
								La gente se reparte sola seg√∫n edificios, vacantes y sueldos.
							</p>
					
							<h2>Sueldos (gremios clave)</h2>
								<div class="wage-row">
								<span>Constructores</span>
								<div class="wage-buttons">
								<button class="wage-btn" data-role="builders" data-wage="0">Bajo</button>
								<button class="wage-btn active" data-role="builders" data-wage="1">Normal</button>
								<button class="wage-btn" data-role="builders" data-wage="2">Alto</button>
								</div>
							</div>
							<div class="wage-row">
								<span>Granjeros</span>
								<div class="wage-buttons">
								<button class="wage-btn" data-role="farmers" data-wage="0">Bajo</button>
								<button class="wage-btn active" data-role="farmers" data-wage="1">Normal</button>
								<button class="wage-btn" data-role="farmers" data-wage="2">Alto</button>
								</div>
							</div>
							<div class="wage-row">
								<span>Canteros</span>
								<div class="wage-buttons">
								<button class="wage-btn" data-role="miners" data-wage="0">Bajo</button>
								<button class="wage-btn active" data-role="miners" data-wage="1">Normal</button>
								<button class="wage-btn" data-role="miners" data-wage="2">Alto</button>
								</div>
							</div>
							<div class="wage-row">
								<span>Le√±adores</span>
								<div class="wage-buttons">
								<button class="wage-btn" data-role="lumberjacks" data-wage="0">Bajo</button>
								<button class="wage-btn active" data-role="lumberjacks" data-wage="1">Normal</button>
								<button class="wage-btn" data-role="lumberjacks" data-wage="2">Alto</button>
								</div>
							</div>
							<div class="wage-row">
								<span>Soldadesca</span>
								<div class="wage-buttons">
								<button class="wage-btn" data-role="soldiers" data-wage="0">Bajo</button>
								<button class="wage-btn active" data-role="soldiers" data-wage="1">Normal</button>
								<button class="wage-btn" data-role="soldiers" data-wage="2">Alto</button>
								</div>
							</div>
							<div class="wage-row">
								<span>Administraci√≥n / Servicio</span>
								<div class="wage-buttons">
								<button class="wage-btn" data-role="servants" data-wage="0">Bajo</button>
								<button class="wage-btn active" data-role="servants" data-wage="1">Normal</button>
								<button class="wage-btn" data-role="servants" data-wage="2">Alto</button>
								</div>
							</div>
							<div class="wage-row">
								<span>Clero</span>
								<div class="wage-buttons">
								<button class="wage-btn" data-role="clergy" data-wage="0">Bajo</button>
								<button class="wage-btn active" data-role="clergy" data-wage="1">Normal</button>
								<button class="wage-btn" data-role="clergy" data-wage="2">Alto</button>
								</div>
							</div>
						</div>
					</div>
				</aside>
	
				<section id="canvas-wrapper">
					<canvas id="gameCanvas" width="1024" height="768"></canvas>
				</section>
			</main>
		</div>
	
		<!-- Modal de eventos -->
		<div id="event-modal" class="hidden">
		<div id="event-window">
			<h2 id="event-title">Evento</h2>
	
			<div id="event-content">
			<div id="event-image-wrapper">
				<img id="event-image" src="" alt="" />
			</div>
			<div id="event-text-wrapper">
				<p id="event-text"></p>
			</div>
			</div>
	
			<div id="event-choices"></div>
		</div>
		</div>
		
		<!-- Ventana emergente para mensajes del juego -->
		<div id="game-message-modal" class="hidden">
			<div id="game-message-window">
			<p id="game-message-text"></p>
			<button id="game-message-close">Aceptar</button>
			</div>
		</div>
	
		<!-- Overlay flotante para la cr√≥nica -->
		<div id="log-overlay" class="log-overlay">
			<div class="log-header">
			<span>Cr√≥nica</span>
			<button id="log-toggle" class="log-toggle-btn">‚Äì</button>
			</div>
			<div class="log-body" id="log-body">
			<ul id="log-list" class="log-list">
				<!-- Se rellena desde JS -->
			</ul>
			</div>
		</div>
	
		<!-- Tooltip flotante para costes / sueldos / impuestos -->
		<div id="ui-tooltip" class="ui-tooltip"></div>
		
		<!-- JS principal como m√≥dulo ES6 -->
		<script type="module" src="main.js"></script>
	</body>
</html>