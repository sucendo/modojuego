<!DOCTYPE html>
<html>
<head>
    <title>Simulación de Guerra Nuclear</title>
    <link rel="stylesheet" type="text/css" href="css/wargames.css">
</head>
<body>
    <h1>Simulación de Guerra Nuclear</h1>
    <p>Elige tu estrategia:</p>
    <button id="piedra">piedra</button>
    <button id="papel">papel</button>
    <button id="tijeras">tijeras</button>
    <div id="temporizador">Tiempo restante: 60 segundos</div>
    <div id="resultado"></div>
    <div id="puntuacion">Victorias: 0 | Derrotas: 0 | Empates: 0</div>
    <div id="reinicio">
        <button id="reinicioButton" style="display: none;">Volver a Jugar</button>
    </div>

    <script>
        const opciones = ["piedra", "papel", "tijeras"];
        let victorias = 0;
        let derrotas = 0;
        let empates = 0;
        let temporizador = 60;
        let juegoTerminado = false;
        let actualizarTemporizador;

        function iniciarJuego() {
            temporizador = 60;
            victorias = 0;
            derrotas = 0;
            empates = 0;
            juegoTerminado = false;
            actualizarTemporizador = setInterval(actualizarCuentaAtras, 1000);

            document.getElementById("temporizador").textContent = `Tiempo restante: ${temporizador} segundos`;
            document.getElementById("resultado").textContent = "";
            document.getElementById("puntuacion").textContent = "Victorias: 0 | Derrotas: 0 | Empates: 0";

            document.querySelectorAll("button").forEach((button) => {
                button.disabled = false;
            });

            const reinicioButton = document.getElementById("reinicioButton");
            reinicioButton.style.display = "none";
        }

        function actualizarCuentaAtras() {
            temporizador--;
            document.getElementById("temporizador").textContent = `Tiempo restante: ${temporizador} segundos`;
            if (temporizador === 0) {
                clearInterval(actualizarTemporizador);
                document.getElementById("temporizador").textContent = "¡Tiempo agotado!";

                // Habilitar el botón "Volver a Jugar"
                const reinicioButton = document.getElementById("reinicioButton");
                reinicioButton.style.display = "block";
            }
        }

        iniciarJuego(); // Iniciar el juego al cargar la página

        document.getElementById("reinicioButton").addEventListener("click", iniciarJuego);

        document.querySelectorAll("button").forEach((button) => {
            button.addEventListener("click", (event) => {
                if (juegoTerminado) return;

                const eleccionUsuario = event.target.id;
                const eleccionComputadora = opciones[Math.floor(Math.random() * 3)];

                let resultado;
                if (eleccionUsuario === eleccionComputadora) {
                    resultado = "Empate. ¡La guerra continúa!";
                    document.getElementById("resultado").className = "empate";
                    empates++;
                } else if (
                    (eleccionUsuario === "piedra" && eleccionComputadora === "tijeras") ||
                    (eleccionUsuario === "papel" && eleccionComputadora === "piedra") ||
                    (eleccionUsuario === "tijeras" && eleccionComputadora === "papel")
                ) {
                    resultado = "¡Victoria! Has ganado la batalla.";
                    document.getElementById("resultado").className = "victoria";
                    victorias++;
                } else {
                    resultado = "¡Derrota! El enemigo ha ganado.";
                    document.getElementById("resultado").className = "derrota";
                    derrotas++;
                }

                document.getElementById("resultado").textContent = `Elegiste ${eleccionUsuario}, la computadora eligió ${eleccionComputadora}. ${resultado}`;
                document.getElementById("puntuacion").textContent = `Victorias: ${victorias} | Derrotas: ${derrotas} | Empates: ${empates}`;

                if (temporizador === 0) {
                    juegoTerminado = true;
                }
            });
        });
    </script>
</body>
</html>
